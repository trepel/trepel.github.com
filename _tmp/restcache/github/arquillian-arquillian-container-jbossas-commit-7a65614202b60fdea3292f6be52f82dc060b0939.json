{"commit":{"id":"7a65614202b60fdea3292f6be52f82dc060b0939","message":"Upgrade Arquillian Core to 1.0.1.Final","committer":{"name":"Aslak Knutsen","email":"aslak@redhat.com","login":"aslakknutsen"},"committed_date":"2012-07-22T12:26:40-07:00","url":"/arquillian/arquillian-container-jbossas/commit/7a65614202b60fdea3292f6be52f82dc060b0939","authored_date":"2012-07-16T14:52:13-07:00","parents":[{"id":"84023edb567b84b0d2e6afd248b75aa168312cb4"}],"author":{"name":"htfv (Aliaksei Lahachou)","email":"aliaksei.lahachou@gmail.com","login":"htfv"},"modified":[{"filename":"jbossas-managed-4.2/pom.xml","diff":"@@ -99,7 +99,7 @@\n         </dependency>\n         <dependency>\n             <groupId>org.jboss.shrinkwrap.descriptors</groupId>\n-            <artifactId>shrinkwrap-descriptors-impl</artifactId>\n+            <artifactId>shrinkwrap-descriptors-impl-javaee</artifactId>\n             <scope>test</scope>\n         </dependency>\n     </dependencies>"},{"filename":"jbossas-managed-4.2/src/test/java/org/jboss/arquillian/container/jbossas/managed_4_2/JBossASIntegrationClientTestCase.java","diff":"@@ -27,7 +27,7 @@\n import org.jboss.shrinkwrap.api.spec.EnterpriseArchive;\n import org.jboss.shrinkwrap.api.spec.JavaArchive;\n import org.jboss.shrinkwrap.descriptor.api.Descriptors;\n-import org.jboss.shrinkwrap.descriptor.api.spec.ee.application.ApplicationDescriptor;\n+import org.jboss.shrinkwrap.descriptor.api.application5.ApplicationDescriptor;\n import org.junit.Assert;\n import org.junit.Test;\n import org.junit.runner.RunWith;\n@@ -46,7 +46,7 @@\n    public static EnterpriseArchive createDeployment() throws Exception \n    {\n       String applicationXml = Descriptors.create(ApplicationDescriptor.class, \"application.xml\")\n-            .ejbModule(\"test.jar\").exportAsString();\n+            .createModule().ejb(\"test.jar\").up().exportAsString();\n       \n       return ShrinkWrap.create(EnterpriseArchive.class, \"test.ear\")\n                .addAsModule("},{"filename":"jbossas-managed-4.2/src/test/java/org/jboss/arquillian/container/jbossas/managed_4_2/JBossASIntegrationEarTestCase.java","diff":"@@ -27,7 +27,7 @@\n import org.jboss.shrinkwrap.api.spec.EnterpriseArchive;\n import org.jboss.shrinkwrap.api.spec.JavaArchive;\n import org.jboss.shrinkwrap.descriptor.api.Descriptors;\n-import org.jboss.shrinkwrap.descriptor.api.spec.ee.application.ApplicationDescriptor;\n+import org.jboss.shrinkwrap.descriptor.api.application5.ApplicationDescriptor;\n import org.junit.Assert;\n import org.junit.Test;\n import org.junit.runner.RunWith;\n@@ -46,7 +46,7 @@\n    public static EnterpriseArchive createDeployment() throws Exception \n    {\n       String applicationXml = Descriptors.create(ApplicationDescriptor.class, \"application.xml\")\n-            .ejbModule(\"test.jar\").exportAsString();\n+            .createModule().ejb(\"test.jar\").up().exportAsString();\n       \n       return ShrinkWrap.create(EnterpriseArchive.class, \"test.ear\")\n                .addAsModule("},{"filename":"jbossas-managed-4.2/src/test/java/org/jboss/arquillian/container/jbossas/managed_4_2/JBossASIntegrationMultipleTargetTestCase.java","diff":"@@ -29,7 +29,7 @@\n import org.jboss.shrinkwrap.api.spec.EnterpriseArchive;\n import org.jboss.shrinkwrap.api.spec.JavaArchive;\n import org.jboss.shrinkwrap.descriptor.api.Descriptors;\n-import org.jboss.shrinkwrap.descriptor.api.spec.ee.application.ApplicationDescriptor;\n+import org.jboss.shrinkwrap.descriptor.api.application5.ApplicationDescriptor;\n import org.junit.Assert;\n import org.junit.Test;\n import org.junit.runner.RunWith;\n@@ -61,7 +61,7 @@ public static EnterpriseArchive createDeployment2() throws Exception\n    private static EnterpriseArchive createDeployment() throws Exception \n    {\n       String applicationXml = Descriptors.create(ApplicationDescriptor.class, \"application.xml\")\n-            .ejbModule(\"test.jar\").exportAsString();\n+            .createModule().ejb(\"test.jar\").up().exportAsString();\n       \n       return ShrinkWrap.create(EnterpriseArchive.class, \"test.ear\")\n                .addAsModule("},{"filename":"jbossas-managed-6/pom.xml","diff":"@@ -78,7 +78,6 @@\n             <scope>provided</scope>\n         </dependency>\n \n-\n         <!-- Testing -->\n         <dependency>\n             <groupId>org.jboss.ejb3</groupId>\n@@ -99,7 +98,7 @@\n         </dependency>\n         <dependency>\n             <groupId>org.jboss.shrinkwrap.descriptors</groupId>\n-            <artifactId>shrinkwrap-descriptors-impl</artifactId>\n+            <artifactId>shrinkwrap-descriptors-impl-javaee</artifactId>\n             <scope>test</scope>\n         </dependency>\n "},{"filename":"jbossas-managed-6/src/test/java/org/jboss/arquillian/container/jbossas/managed_6/DescriptorDeploymentTestCase.java","diff":"@@ -17,6 +17,9 @@\n  */\n package org.jboss.arquillian.container.jbossas.managed_6;\n \n+import java.io.IOException;\n+import java.io.OutputStream;\n+\n import javax.annotation.Resource;\n import javax.jms.Queue;\n \n@@ -26,8 +29,7 @@\n import org.jboss.shrinkwrap.api.ShrinkWrap;\n import org.jboss.shrinkwrap.api.spec.JavaArchive;\n import org.jboss.shrinkwrap.descriptor.api.Descriptor;\n-import org.jboss.shrinkwrap.descriptor.api.Descriptors;\n-import org.jboss.shrinkwrap.descriptor.api.spec.jpa.persistence.PersistenceDescriptor;\n+import org.jboss.shrinkwrap.descriptor.api.DescriptorExportException;\n import org.junit.Assert;\n import org.junit.Test;\n import org.junit.runner.RunWith;\n@@ -57,9 +59,36 @@\n    @Deployment(name = DEP, order = 1)\n    public static Descriptor createQueue() \n    {\n-      // we have no JMSDescriptor, but importing as any other should export it clean.\n+      // we have no JMSDescriptor\n       // TODO: create a Generic Descriptor type.\n-      return Descriptors.importAs(PersistenceDescriptor.class, \"test-hornetq-jms.xml\").from(TEST_QUEUE_DEF);\n+      return new Descriptor()\n+      {\n+         @Override\n+         public String getDescriptorName()\n+         {\n+            return \"test-hornetq-jms.xml\";\n+         }\n+\n+         @Override\n+         public void exportTo(OutputStream output)\n+               throws DescriptorExportException, IllegalArgumentException\n+         {\n+            try\n+            {\n+               output.write(TEST_QUEUE_DEF.getBytes(\"UTF-8\"));\n+            }\n+            catch (IOException e)\n+            {\n+               throw new DescriptorExportException(e.getMessage(), e);\n+            }\n+         }\n+\n+         @Override\n+         public String exportAsString() throws DescriptorExportException\n+         {\n+            return TEST_QUEUE_DEF;\n+         }\n+      };\n    }\n    \n    @Deployment(name = DEP, order = 2)"},{"filename":"jbossas-remote-4.2/pom.xml","diff":"@@ -78,7 +78,7 @@\n         </dependency>\n         <dependency>\n             <groupId>org.jboss.shrinkwrap.descriptors</groupId>\n-            <artifactId>shrinkwrap-descriptors-impl</artifactId>\n+            <artifactId>shrinkwrap-descriptors-impl-javaee</artifactId>\n             <scope>test</scope>\n         </dependency>\n "},{"filename":"jbossas-remote-4.2/src/test/java/org/jboss/arquillian/container/jbossas/remote_4_2/JBossASIntegrationClientTestCase.java","diff":"@@ -27,7 +27,7 @@\n import org.jboss.shrinkwrap.api.spec.EnterpriseArchive;\n import org.jboss.shrinkwrap.api.spec.JavaArchive;\n import org.jboss.shrinkwrap.descriptor.api.Descriptors;\n-import org.jboss.shrinkwrap.descriptor.api.spec.ee.application.ApplicationDescriptor;\n+import org.jboss.shrinkwrap.descriptor.api.application5.ApplicationDescriptor;\n import org.junit.Assert;\n import org.junit.Test;\n import org.junit.runner.RunWith;\n@@ -46,7 +46,7 @@\n    public static EnterpriseArchive createDeployment() throws Exception \n    {\n       String applicationXml = Descriptors.create(ApplicationDescriptor.class, \"application.xml\")\n-            .ejbModule(\"test.jar\").exportAsString();\n+            .createModule().ejb(\"test.jar\").up().exportAsString();\n       \n       return ShrinkWrap.create(EnterpriseArchive.class, \"test.ear\")\n                .addAsModule("},{"filename":"jbossas-remote-4.2/src/test/java/org/jboss/arquillian/container/jbossas/remote_4_2/JBossASIntegrationEarTestCase.java","diff":"@@ -27,7 +27,7 @@\n import org.jboss.shrinkwrap.api.spec.EnterpriseArchive;\n import org.jboss.shrinkwrap.api.spec.JavaArchive;\n import org.jboss.shrinkwrap.descriptor.api.Descriptors;\n-import org.jboss.shrinkwrap.descriptor.api.spec.ee.application.ApplicationDescriptor;\n+import org.jboss.shrinkwrap.descriptor.api.application5.ApplicationDescriptor;\n import org.junit.Assert;\n import org.junit.Test;\n import org.junit.runner.RunWith;\n@@ -46,7 +46,7 @@\n    public static EnterpriseArchive createDeployment() throws Exception \n    {\n       String applicationXml = Descriptors.create(ApplicationDescriptor.class, \"application.xml\")\n-            .ejbModule(\"test.jar\").exportAsString();\n+            .createModule().ejb(\"test.jar\").up().exportAsString();\n       \n       return ShrinkWrap.create(EnterpriseArchive.class, \"test.ear\")\n                .addAsModule("},{"filename":"pom.xml","diff":"@@ -30,7 +30,7 @@\n     <properties>\n \n         <!-- Versioning -->\n-        <version.arquillian_core>1.0.0.CR7</version.arquillian_core>\n+        <version.arquillian_core>1.0.1.Final</version.arquillian_core>\n \n         <!-- override from parent -->\n         <maven.compiler.argument.target>1.5</maven.compiler.argument.target>"}],"tree":"8ec7eac4befb18e115d6a993ea14bbb240465758"}}