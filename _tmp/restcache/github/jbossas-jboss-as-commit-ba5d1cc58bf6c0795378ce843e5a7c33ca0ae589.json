{"commit":{"tree":"24468bd0ca1a9e86a70158ca35357b80d9940eda","committed_date":"2011-03-03T15:19:46-08:00","authored_date":"2011-03-03T14:43:50-08:00","committer":{"login":"n1hility","email":"jason.greene@redhat.com","name":"Jason T. Greene"},"url":"/jbossas/jboss-as/commit/ba5d1cc58bf6c0795378ce843e5a7c33ca0ae589","added":["build/src/main/resources/modules/javax/xml/jaxp-provider/main/module.xml"],"parents":[{"id":"5d32981d44854886a43a30a0c228a49c7d651360"}],"message":"Fix xalan, use the new jaxp module, fix JBAS-8909","author":{"login":"n1hility","email":"jason.greene@redhat.com","name":"Jason T. Greene"},"modified":[{"diff":"@@ -88,6 +88,8 @@ public void start(Context context) throws LifecycleException {\n             cmd.add(jbossHomeDir + \"/modules\");\n             cmd.add(\"-logmodule\");\n             cmd.add(\"org.jboss.logmanager\");\n+            cmd.add(\"-jaxpmodule\");\n+            cmd.add(\"javax.xml.jaxp-provider\");\n             cmd.add(\"org.jboss.as.standalone\");\n \n             log.info(\"Starting container with: \" + cmd.toString());\n@@ -173,4 +175,4 @@ public Boolean run() {\n         }\n \n     }\n-}\n\\ No newline at end of file\n+}","filename":"arquillian/container-managed/src/main/java/org/jboss/as/arquillian/container/managed/JBossAsManagedContainer.java"},{"diff":"@@ -185,6 +185,8 @@\n             <maven-resource group=\"org.jboss.spec.javax.xml.bind\" artifact=\"jboss-jaxb-api_2.2_spec\"/>\n         </module-def>\n \n+        <module-def name=\"javax.xml.jaxp-provider\"/>\n+\n         <module-def name=\"javax.xml.registry.api\">\n             <maven-resource group=\"org.jboss.spec.javax.xml.registry\" artifact=\"jboss-jaxr-api_1.0_spec\"/>\n         </module-def>\n@@ -222,8 +224,8 @@\n         <module-def name=\"org.apache.commons.logging\"/>\n \n         <module-def name=\"org.apache.xalan\">\n-            <maven-resource group=\"apache-xalan\" artifact=\"serializer\"/>\n-            <maven-resource group=\"apache-xalan\" artifact=\"xalan\"/>\n+            <maven-resource group=\"org.apache.xalan\" artifact=\"serializer\"/>\n+            <maven-resource group=\"org.apache.xalan\" artifact=\"xalan\"/>\n         </module-def>\n \n         <module-def name=\"org.apache.xerces\">","filename":"build/build.xml"},{"diff":"@@ -172,12 +172,12 @@\n         </dependency>\n \n         <dependency>\n-            <groupId>apache-xalan</groupId>\n+            <groupId>org.apache.xalan</groupId>\n             <artifactId>serializer</artifactId>\n         </dependency>\n \n         <dependency>\n-            <groupId>apache-xalan</groupId>\n+            <groupId>org.apache.xalan</groupId>\n             <artifactId>xalan</artifactId>\n         </dependency>\n ","filename":"build/pom.xml"},{"diff":"@@ -90,6 +90,7 @@ echo.\n     -jar \"%JBOSS_HOME%\\jboss-modules.jar\" ^\n     -mp \"%JBOSS_HOME%\\modules\" ^\n     -logmodule \"org.jboss.logmanager\" ^\n+    -jaxpmodule \"javax.xml.jaxp-provider\" ^\n      org.jboss.as.standalone ^\n     -Djboss.home.dir=\"%JBOSS_HOME%\" ^\n      %*","filename":"build/src/main/resources/bin/standalone.bat"},{"diff":"@@ -138,6 +138,7 @@ while true; do\n          -jar \\\"$JBOSS_HOME/jboss-modules.jar\\\" \\\n          -mp \\\"$JBOSS_HOME/modules\\\" \\\n          -logmodule \"org.jboss.logmanager\" \\\n+         -jaxpmodule javax.xml.jaxp-provider \\\n          org.jboss.as.standalone \\\n          -Djboss.home.dir=\\\"$JBOSS_HOME\\\" \\\n          \"$@\"\n@@ -150,6 +151,7 @@ while true; do\n          -jar \\\"$JBOSS_HOME/jboss-modules.jar\\\" \\\n          -mp \\\"$JBOSS_HOME/modules\\\" \\\n          -logmodule \"org.jboss.logmanager\" \\\n+         -jaxpmodule javax.xml.jaxp-provider \\\n          org.jboss.as.standalone \\\n          -Djboss.home.dir=\\\"$JBOSS_HOME\\\" \\\n          \"$@\" \"&\"","filename":"build/src/main/resources/bin/standalone.sh"},{"diff":"@@ -199,6 +199,8 @@ public HostControllerEnvironment getHostControllerEnvironment() {\n         command.add(\"modules\");\n         command.add(\"-logmodule\");\n         command.add(\"org.jboss.logmanager\");\n+        command.add(\"-jaxpmodule\");\n+        command.add(\"javax.xml.jaxp-provider\");\n         command.add(\"org.jboss.as.server\");\n \n         return command;","filename":"host-controller/src/main/java/org/jboss/as/host/controller/ModelCombiner.java"},{"diff":"@@ -76,7 +76,7 @@\n         <version.org.apache.felix.configadmin>1.2.8</version.org.apache.felix.configadmin>\n         <version.org.apache.felix.log>1.0.0</version.org.apache.felix.log>\n         <version.org.apache.neethi>2.0.4</version.org.apache.neethi>\n-        <version.org.apache.xalan>2.7.1.patch01-brew</version.org.apache.xalan>\n+        <version.org.apache.xalan>2.7.1-1.jbossorg</version.org.apache.xalan>\n         <version.org.apache.xerces>2.9.1</version.org.apache.xerces>\n         <version.org.apache.ws.commons.xmlschema>1.4.5</version.org.apache.ws.commons.xmlschema>\n         <version.org.hibernate.javax.persistence.hibernate-jpa-2.0-api>1.0.0.Final</version.org.hibernate.javax.persistence.hibernate-jpa-2.0-api>\n@@ -106,7 +106,7 @@\n         <version.org.jboss.metadata.common>7.0.0.Alpha7</version.org.jboss.metadata.common>\n         <version.org.jboss.metadata.ear>7.0.0.Alpha7</version.org.jboss.metadata.ear>\n         <version.org.jboss.metadata.web>7.0.0.Alpha7</version.org.jboss.metadata.web>\n-        <version.org.jboss.modules.jboss-modules>1.0.0.Beta14</version.org.jboss.modules.jboss-modules>\n+        <version.org.jboss.modules.jboss-modules>1.0.0.Beta15</version.org.jboss.modules.jboss-modules>\n         <version.org.jboss.msc.jboss-msc>1.0.0.Beta6</version.org.jboss.msc.jboss-msc>\n         <version.org.jboss.netty>3.2.1.Final</version.org.jboss.netty>\n         <version.org.jboss.osgi.common>1.0.6</version.org.jboss.osgi.common>\n@@ -385,12 +385,18 @@\n             </dependency>\n \n             <dependency>\n-                <groupId>apache-xalan</groupId>\n+                <groupId>org.apache.xalan</groupId>\n                 <artifactId>serializer</artifactId>\n                 <version>${version.org.apache.xalan}</version>\n             </dependency>\n \n             <dependency>\n+                <groupId>org.apache.xalan</groupId>\n+                <artifactId>xalan</artifactId>\n+                <version>${version.org.apache.xalan}</version>\n+            </dependency>\n+\n+            <dependency>\n                 <groupId>xerces</groupId>\n                 <artifactId>xercesImpl</artifactId>\n                 <version>${version.org.apache.xerces}</version>\n@@ -403,12 +409,6 @@\n             </dependency>\n \n             <dependency>\n-                <groupId>apache-xalan</groupId>\n-                <artifactId>xalan</artifactId>\n-                <version>${version.org.apache.xalan}</version>\n-            </dependency>\n-\n-            <dependency>\n                 <groupId>org.apache.cxf</groupId>\n                 <artifactId>cxf-api</artifactId>\n                 <version>${version.org.apache.cxf}</version>","filename":"pom.xml"},{"diff":"@@ -60,6 +60,7 @@ public static void main(String[] args) throws IOException {\n         String modulePath = System.getProperty(\"jboss.module.path\", \"modules\");\n         String bootJar = \"jboss-modules.jar\";\n         String logModule = \"org.jboss.logmanager\";\n+        String jaxpModule = \"javax.xml.jaxp-provider\";\n         String bootModule = HOST_CONTROLLER_MODULE;\n         String bindAddress = \"127.0.0.1\";\n         int bindPort = 0;\n@@ -85,6 +86,8 @@ public static void main(String[] args) throws IOException {\n                 bootJar = args[++i];\n             } else if (\"-logmodule\".equals(arg)) {\n                 logModule = args[++i];\n+            } else if (\"-jaxpmodule\".equals(arg)) {\n+                jaxpModule = args[++i];\n             } else if (\"-bind-addr\".equals(arg)) {\n                 bindAddress = args[++i];\n             } else if (\"-bind-port\".equals(arg)) {\n@@ -149,6 +152,8 @@ public static void main(String[] args) throws IOException {\n         initialCommand.add(modulePath);\n         initialCommand.add(\"-logmodule\");\n         initialCommand.add(logModule);\n+        initialCommand.add(\"-jaxpmodule\");\n+        initialCommand.add(jaxpModule);\n         initialCommand.add(bootModule);\n         initialCommand.add(CommandLineConstants.INTERPROCESS_PC_ADDRESS);\n         initialCommand.add(boundAddress.getHostName());","filename":"process-controller/src/main/java/org/jboss/as/process/Main.java"}],"id":"ba5d1cc58bf6c0795378ce843e5a7c33ca0ae589"}}