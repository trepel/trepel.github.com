{"commit":{"tree":"2bd99f567d6cd02d705685f8c20bf10bf1758ac9","parents":[{"id":"eed05544ce17accecbb258961a442f7f420b1944"}],"authored_date":"2012-01-01T08:19:25-08:00","id":"25c2e20de7dfe3651b49dd931a7fd2db20ae5f28","url":"/arquillian/arquillian-container-cloudbees/commit/25c2e20de7dfe3651b49dd931a7fd2db20ae5f28","committer":{"email":"alexis@sewatech.org","name":"Alexis Hassler","login":"hasalex"},"committed_date":"2012-01-01T08:19:25-08:00","message":"Throw IllegalArgumentException when trying to deploy an ear (issue #1)","author":{"email":"alexis@sewatech.org","name":"Alexis Hassler","login":"hasalex"},"modified":[{"filename":"src/main/java/org/jboss/arquillian/container/cloudbees/CloudbeesContainer.java","diff":"@@ -80,6 +80,10 @@ public void undeploy(Descriptor descriptor) throws DeploymentException {\n     public ProtocolMetaData deploy(Archive<?> archive) throws DeploymentException {\n         log.info(\"Deploy archive of type \" + archive.getClass().getSimpleName());\n         Validate.notNull(archive, \"Archive must not be null\");\n+        if (archive instanceof EnterpriseArchive) {\n+            throw new IllegalArgumentException(\"Enterprise Archive is not supported for the Cloudbees container\");\n+        }\n+        \n         CloudbeesConfiguration configuration = configurationProducer.get();\n \n         String appId = configuration.getAppId();"},{"filename":"src/test/java/org/jboss/arquillian/container/cloudbees/CloudbeesEjbEarTestFail.java","diff":"@@ -1,7 +1,3 @@\n-/*\n- * To change this template, choose Tools | Templates and open the template in\n- * the editor.\n- */\n package org.jboss.arquillian.container.cloudbees;\n \n import javax.ejb.EJB;\n@@ -20,8 +16,10 @@\n import org.junit.runner.RunWith;\n \n /**\n- *\n- * @author alexis\n+ * This test has been disabled because ear deployment is not supported at this time\n+ * see <a href=\"https://github.com/hasalex/arquillian-container-cloudbees/issues/1\">issue #1</a>\n+ * \n+ * @author <a href=\"mailto:alexis@sewatech.org\">Alexis Hassler</a>\n  */\n @RunWith(Arquillian.class)\n public class CloudbeesEjbEarTestFail {\n@@ -42,12 +40,12 @@\n     @EJB(beanName=\"EchoService\")\n     EchoService namedBean;\n     \n-    @Test @Ignore // It fails :-(\n+    @Test\n     public void shouldEjbBeInjected() {\n         assertNotNull(\"Anonymous bean has not bean injected\", bean);\n     }\n \n-    @Test @Ignore // It fails too :-(\n+    @Test\n     public void shouldNamedEjbBeInjected() {\n         assertNotNull(\"Named bean has not bean injected\", namedBean);\n     }"}]}}