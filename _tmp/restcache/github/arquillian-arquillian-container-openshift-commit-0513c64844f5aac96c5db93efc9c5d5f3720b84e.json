{"commit":{"id":"0513c64844f5aac96c5db93efc9c5d5f3720b84e","message":"ARQ-786 added deploymentTime to configuration","committer":{"name":"Karel Piwko","email":"kpiwko@redhat.com","login":"kpiwko"},"committed_date":"2012-02-25T07:17:27-08:00","url":"/arquillian/arquillian-container-openshift/commit/0513c64844f5aac96c5db93efc9c5d5f3720b84e","authored_date":"2012-02-23T12:56:12-08:00","parents":[{"id":"b41f6ce7679a51cb6777301b644d98b4339a9485"}],"author":{"name":"papousek","email":"jan.papousek@gmail.com","login":"papousek"},"modified":[{"filename":"README.md","diff":"@@ -26,6 +26,7 @@ Following configuration properties have sensible defaults, but can be modified:\n \n * _type_ - cartridge type, e.g. jbossas-7.0\n * _libraDomain_ - domain where OpenShift server instance is running, e.g. rhcloud.com\n+* _deploymentTime_ - a maximal time in ms to finish deployment,e.g. 30000\n \n Following configuration properties are optional\n "},{"filename":"openshift-express/src/main/java/org/jboss/arquillian/container/openshift/express/OpenShiftExpressConfiguration.java","diff":"@@ -75,6 +75,8 @@\n     private CartridgeType cartridgeType;\n \n     private String passphrase = System.getenv(\"SSH_PASSPHRASE\");\n+    \n+    private long deploymentTime = 30000;\n \n     /*\n      * (non-Javadoc)\n@@ -254,6 +256,14 @@ private URL constructRootContext() throws MalformedURLException {\n         return new URL(sb.toString());\n     }\n \n+    public long getDeploymentTime() {\n+        return deploymentTime;\n+    }\n+\n+    public void setDeploymentTime(long deploymentTime) {\n+        this.deploymentTime = deploymentTime;\n+    }    \n+\n     private URI constructRemoteRepositoryURI() throws URISyntaxException {\n         StringBuilder sb = new StringBuilder(\"ssh://\");\n         sb.append(sshUserName).append(\"@\").append(getHostName()).append(\"/~/git/\").append(application).append(\".git/\");"},{"filename":"openshift-express/src/main/java/org/jboss/arquillian/container/openshift/express/OpenShiftExpressContainer.java","diff":"@@ -233,12 +233,12 @@ private void waitUntilDeployed(String pingArchiveName, String deploymentName) th\n \n       log.fine(\"Checking if deployment is deployed: \" + url);\n \n-      long timeout = System.currentTimeMillis() + 30000;\n+      long timeout = System.currentTimeMillis() + configuration.get().getDeploymentTime();\n \n       UrlChecker checker = new UrlChecker(timeout, url.toString());\n       if (!checker.checkUrlWithRetry())\n       {\n-         throw new DeploymentException(\"Following path were not reachable within \" + 30000 + \" ms after git push. \"\n+         throw new DeploymentException(\"Following path were not reachable within \" + configuration.get().getDeploymentTime() + \" ms after git push. \"\n                + \"Check if following archives are constructed properly:\\n\" + deploymentName);\n       }\n    }"}],"tree":"2ad7b8ed3a76d028b4de29e6ad0e41ab68948c6f"}}