{"commit":{"id":"d09d5df85f6d8524593bb6c269dac2949cac7377","message":"[ARQ-137] Use @RunWish(Arquillian.class) in the GFv3 integration test","committer":{"name":"Andrew Lee Rubinger","email":"alr@jboss.org","login":"ALRubinger"},"committed_date":"2010-05-09T14:49:03-07:00","url":"/arquillian/arquillian-container-glassfish/commit/d09d5df85f6d8524593bb6c269dac2949cac7377","authored_date":"2010-05-09T14:49:03-07:00","parents":[{"id":"35ca91b1964a98a988ad399151653e8bbb8ea3a4"}],"author":{"name":"Andrew Lee Rubinger","email":"alr@jboss.org","login":"ALRubinger"},"modified":[{"filename":"containers/glassfish-embedded-30/pom.xml","diff":"@@ -97,6 +97,13 @@\n          <version>${project.version}</version>\n          <scope>test</scope>\n       </dependency>\n+      \n+      <dependency>\n+        <groupId>org.jboss.arquillian</groupId>\n+        <artifactId>arquillian-junit</artifactId>\n+        <version>${project.version}</version>\n+        <scope>test</scope>\n+      </dependency>\n \n       <dependency>\n          <groupId>junit</groupId>"},{"filename":"containers/glassfish-embedded-30/src/test/java/org/jboss/arquillian/glassfish/GlassFishEmbeddedContainerTestCase.java","diff":"@@ -19,18 +19,18 @@\n import java.io.ByteArrayOutputStream;\n import java.io.InputStream;\n import java.net.URL;\n+import java.util.logging.Logger;\n \n-import org.jboss.arquillian.impl.DynamicServiceLoader;\n-import org.jboss.arquillian.impl.XmlConfigurationBuilder;\n-import org.jboss.arquillian.impl.context.SuiteContext;\n-import org.jboss.arquillian.spi.Context;\n-import org.jboss.arquillian.spi.DeployableContainer;\n+import org.jboss.arquillian.api.Deployment;\n+import org.jboss.arquillian.api.RunMode;\n+import org.jboss.arquillian.api.RunModeType;\n+import org.jboss.arquillian.junit.Arquillian;\n import org.jboss.shrinkwrap.api.ShrinkWrap;\n import org.jboss.shrinkwrap.api.spec.WebArchive;\n-import org.junit.After;\n import org.junit.Assert;\n-import org.junit.Before;\n import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n \n /**\n  * GlassFishEmbeddedContainerTestCase\n@@ -38,31 +38,30 @@\n  * @author <a href=\"mailto:aslak@redhat.com\">Aslak Knutsen</a>\n  * @version $Revision: $\n  */\n+@RunWith(Arquillian.class)\n+@RunMode(RunModeType.LOCAL)\n public class GlassFishEmbeddedContainerTestCase \n {\n-   private DeployableContainer container;\n-   \n-   private Context context = new SuiteContext(new DynamicServiceLoader());\n-   \n-   private WebArchive war = ShrinkWrap.create(\"test.war\", WebArchive.class)\n-                              .addClass(TestServlet.class);\n \n-   @Before\n-   public void startup() throws Exception\n+   /**\n+    * Logger\n+    */\n+   private static final Logger log = Logger.getLogger(GlassFishEmbeddedContainerTestCase.class.getName());\n+   \n+   /**\n+    * Deployment for the test\n+    * @return\n+    */\n+   @Deployment\n+   public static WebArchive getDeployment()\n    {\n-      container = new GlassFishEmbeddedContainer();\n-      container.setup(context, new XmlConfigurationBuilder().build());\n-      container.start(context);\n-      container.deploy(context, war);\n-   }\n+      final WebArchive war = ShrinkWrap.create(\"test.war\", WebArchive.class).addClass(TestServlet.class);\n+      log.info(war.toString(true));\n+      return war;\n \n-   @After\n-   public void shutdown() throws Exception\n-   {\n-      container.undeploy(context, war);\n-      container.stop(context);\n    }\n \n+\n    @Test\n    public void shouldBeAbleToDeployWebArchive() throws Exception\n    {"}],"tree":"f73272324a4172728207161bb68cbb4235e1fd00"}}